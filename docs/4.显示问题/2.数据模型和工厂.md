## 本节说明

上一节的测试提醒我们`QuestionMapper`、`QuestionExample`、`Question`都不存在，所以我们接下来的工作，就是定义`question`数据表，并产生对应的ORM映射模型。`question`表的定义如下：

*src/main/resources/db/migration/V20260205__create_table_question.sql*

```sql
CREATE TABLE `question`
(
    `id`           int unsigned NOT NULL AUTO_INCREMENT,
    `user_id`      int          NOT NULL,
    `title`        varchar(100)     NOT NULL,
    `content`      text             NOT NULL,
    `created_at` timestamp NOT NULL,
    `updated_at` timestamp NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE = InnoDB
  AUTO_INCREMENT = 1;
```

接下来运行Maven的`flyway`插件的`flyway:migrate`命令生成表，并修改`generatorConfig.xml`的配置，改为生成`question`表，运行`Generator#main()`方法生成对应的数据库映射文件。

重新导入缺失的类之后，我们应该立即运行测试。但是你会发现，`QuestionFactory`类还不存在。`xxxFactory`类是我们为了测试方便而定义的模型工厂类，它会生产我们需要的模型对象。


## 新建模型工厂

*src/test/java/com/nofirst/spring/tdd/zhihu/startup/factory/QuestionFactory.java*

```
package com.nofirst.spring.tdd.zhihu.startup.factory;

import com.nofirst.spring.tdd.zhihu.startup.mbg.model.Question;
import java.util.Date;

public class QuestionFactory {

    public static Question createQuestion() {
        Date now = new Date();

        Question question = new Question();
        question.setUserId(1);
        question.setTitle("this is a question");
        question.setContent("this is content");
        question.setCreatedAt(now);
        question.setUpdatedAt(now);

        return question;
    }
}

```

再次运行测试：

```
...
java.lang.AssertionError: Status expected:<200> but was:<404>
Expected :200
Actual   :404
```

测试结果很清晰，说明路由不存在，下一节我们进行修复即可。